#!/usr/bin/env python3
import requests
import json

# Get your access token from https://developer.feedly.com/v3/auth/
ACCESS_TOKEN = "YOUR_ACCESS_TOKEN_HERE"

headers = {
    "Authorization": f"Bearer {ACCESS_TOKEN}",
    "Content-Type": "application/json"
}

def get_feeds():
    # Get all subscriptions
    response = requests.get("https://cloud.feedly.com/v3/subscriptions", headers=headers)
    subscriptions = response.json()
    
    feeds = []
    for sub in subscriptions:
        feed = {
            "title": sub.get("title", ""),
            "url": sub.get("website", sub.get("id", "")),
            "velocity": sub.get("velocity", 0),
            "categories": [cat.get("label", "") for cat in sub.get("categories", [])]
        }
        feeds.append(feed)
    
    return feeds

if __name__ == "__main__":
    try:
        feeds = get_feeds()
        for feed in feeds:
            print(f"Title: {feed['title']}")
            print(f"URL: {feed['url']}")
            print(f"Velocity: {feed['velocity']}")
            print(f"Categories: {', '.join(feed['categories'])}")
            print("-" * 50)
    except Exception as e:
        print(f"Error: {e}")
