try:
    from urllib.parse import urlsplit
except ImportError:
    from urlparse import urlsplit


class GetLoginCommandBuilder:
    def __init__(self,
                 registry_url,
                 authentication_token):
        self.registry_url = registry_url
        self.authentication_token = authentication_token

    def build_npm_set_auth_token_command(self):
        config_name = self.get_token_config_name(self.registry_url)
        return ['npm', 'config', 'set', config_name, self.authentication_token]

    def build_npm_set_registry_command(self):
        return ['npm', 'config', 'set', 'registry', self.registry_url]

    @staticmethod
    def get_token_config_name(registry_url):
        uri = urlsplit(registry_url)
        return '//{}{}:_authToken'.format(uri.hostname, uri.path)
